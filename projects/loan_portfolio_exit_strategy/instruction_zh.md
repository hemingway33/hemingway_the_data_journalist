# 贷款组合退出策略模拟

## 项目目标

本模拟分析并比较了多年期内，针对一个气球贷（balloon payment）组合的不同退出策略。目标是在各种情景下评估净现值（NPV）和总绝对损失，同时考虑客户流失、融资成本、违约率、回收率以及特定策略干预等因素。

## 投资组合与基线假设

*   **初始组合:** 10,000 笔贷款，平均每笔贷款余额 100,000 美元。
*   **贷款类型:** 气球贷（按月付息，12个月末还本）。
*   **利率:** 年化利率 12%（月息 1%）。
*   **融资成本:** 年化 3%。
*   **风险分箱:** 8 个分箱，预测违约率（PD）递增（从 2% 到 35%）。第 7 和第 8 箱被视为高风险。
*   **标准回收率:** 对于未处理的违约贷款，本金回收率为 30%。
*   **模拟期限:** 3 年。
*   **客户流失:** 年化 30% 的客户流失率（贷款还清/移除）。
*   **贴现率:** 3%（等于融资成本）。

## 模拟策略

### 基线（标准运营）

*   贷款按标准的 12 个月气球贷期限运行。
*   期末，贷款要么违约（基于其分箱的 PD 率），要么还清本金。
*   违约贷款根据 `STANDARD_RECOVERY_RATE`（30%）回收本金。
*   存续贷款（指还清的贷款）离开组合。
*   每年年初应用年度客户流失。

### 策略 1：召回高风险贷款（断贷）

*   对低风险贷款与基线相同。
*   **高风险贷款（第 7 和 8 箱）:** 这些贷款在其初始 12 个月期限结束时被召回/终止。结果取决于指定的 `RECOVERY_RATES_STRAT1`（模拟中从 10% 到 50% 不等）。这意味着贷方强制还款或清算，从而实现不同于标准回收率的回收率。
*   本模拟测试通过此召回过程实现的不同回收率的影响。

### 策略 2：强制展期（24 个月分期摊还）

*   此策略应用强制性的 24 个月展期并附带变更，模拟期为 2 年（因为展期定义了该期间）。
*   **低风险贷款:** 在 *分期摊还*（本息同还）的基础上展期 24 个月。利率增加 `EXTENSION_RATE_INCREASE`（5%）。存续/违约基于原始的 `annual_pd`，使用 *分段指数生存模型*（前 6 个月违约风险更高，比率由 `HAZARD_RATE_RATIO` 定义）进行建模。
*   **高风险贷款:**
    *   一小部分（`REFUSAL_PROBABILITY`, 5%）拒绝展期，并遵循基于其原始 PD 的基线违约/还清逻辑。
    *   其余接受展期：
        *   立即获得本金削减（`PRINCIPAL_REDUCTION_FACTOR`, 10%）。
        *   进入基于 *削减后本金* 的 24 个月 *分期摊还* 还款计划。
        *   利率增加 `EXTENSION_RATE_INCREASE`（5%）。
        *   其年化 PD 率 *降低* `DEFAULT_REDUCTION_FACTORS`（模拟中从 20% 到 60% 不等）。
        *   在 24 个月期间的存续/违约使用 *降低后的 PD* 和 *分段指数生存模型* 进行建模。
*   本模拟测试通过此干预实现的不同违约降低系数的影响。

### 策略 3：选择性展期（无限期气球贷）

*   对低风险贷款与基线相同。
*   **高风险贷款:**
    *   一小部分（`REFUSAL_PROBABILITY`, 5%）拒绝展期并遵循基线逻辑。
    *   其余接受展期：
        *   立即获得本金削减（`PRINCIPAL_REDUCTION_FACTOR`, 10%）。
        *   进入基于 *削减后本金* 的 *新的 12 个月气球贷期限*。
        *   利率增加 `EXTENSION_RATE_INCREASE`（5%）。
        *   其年化 PD 率 *降低* `DEFAULT_REDUCTION_FACTORS`（模拟中从 20% 到 60% 不等）。
        *   在此 12 个月展期结束时，它们要么违约（基于 *降低后的 PD*），要么还清削减后的本金。
        *   如果它们还清，只要模拟在运行，它们 *可能在随后的年份重复此过程*（再次获得本金削减，再次进入基于降低后 PD 的 12 个月气球贷展期）。这允许模拟无限期展期的情景。
*   本模拟测试不同违约降低系数对这种滚动展期策略的影响。 